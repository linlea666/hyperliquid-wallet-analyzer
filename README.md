# HyperLiquid 钱包分析系统

> 一款为交易者、跟单用户设计的聪明钱挖掘系统

## 📋 项目概述

通过分析 HyperLiquid 链上钱包数据，帮助用户发现优质交易者并辅助跟单决策。

### 核心功能

- 🔍 **智能挖掘**：自动发现潜力钱包（1-6个月新崛起的小资金聪明钱）
- 📊 **深度分析**：多维度分析钱包交易行为和收益表现
- 📈 **可视化展示**：直观的图表和指标展示
- 💡 **跟单参考**：提供详细的交易历史和风险指标

---

## 🎯 功能特性

### 钱包管理
- ✅ 单个/批量导入钱包地址
- ✅ 自动数据抓取和分析
- ✅ 定时更新钱包数据
- ✅ 钱包收藏功能
- ✅ 存款取款记录（新增）
- ✅ 初始资金计算（基于存款取款）（新增）
- ✅ 钱包年龄计算（基于第一笔合约开仓时间）（新增）

### 数据分析
- ✅ 收益指标（ROI、盈亏比、胜率）
- ✅ 风险指标（最大回撤、波动率）
- ✅ 行为分析（交易频率、持仓周期、多空偏好）
- ✅ Smart Money Score 评分（0-100）

### 可视化
- ✅ 收益曲线图（24H/7D/30D/全部）
- ✅ 多空收益对比
- ✅ 交易历史表格
- ✅ 当前持仓信息

### 智能推荐
- ✅ 潜力钱包自动推荐
- ✅ 可配置的推荐算法
- ✅ 推荐理由说明

### 可视化看板（新增）⭐
- ✅ 总体统计（钱包数、总资产、总盈亏等）
- ✅ 多空比统计（整体/按币种/盈亏对比）
- ✅ 合约方向统计（持仓/交易方向分布）
- ✅ 资金数据统计（规模分布/流向趋势）
- ✅ 爆仓信息统计（爆仓次数/分析/时间线）
- ✅ 钱包异动监控（大额交易/存取款/异常行为）
- ✅ 排行榜（收益/ROI/活跃度）
- ✅ 趋势图表（收益/多空比/资金流向）

### 通知提醒系统（新增）⭐
- ✅ 浏览器推送通知（Web Notification）
- ✅ 邮件通知（SMTP）
- ✅ 收益提醒（收益/ROI 达到阈值）
- ✅ 风险提醒（爆仓/回撤/杠杆率）
- ✅ 异动提醒（大额交易/存取款/异常行为）
- ✅ 通知历史记录
- ✅ 可配置的通知阈值

---

## 🛠 技术栈

### 后端
- **语言**：Python 3.10+
- **框架**：FastAPI
- **数据处理**：pandas, numpy
- **任务调度**：APScheduler
- **日志**：loguru

### 前端
- **框架**：Vue 3 + Composition API
- **构建工具**：Vite
- **UI 组件**：Element Plus
- **图表库**：ECharts
- **状态管理**：Pinia

### 数据存储
- **主存储**：JSON 文件（简单直观，易于备份）
- **缓存**：内存缓存 + JSON 文件

### 部署
- **推荐**：Docker Compose（一键部署）
- **备选**：直接运行

---

## 📁 项目结构

```
gendan/
├── backend/              # 后端代码
│   ├── app/             # 应用代码
│   ├── data/            # 数据目录
│   └── logs/            # 日志目录
├── frontend/            # 前端代码
├── docs/                # 文档
└── docker-compose.yml   # Docker 配置
```

---

## 📚 文档

详细文档请查看：

1. **[需求规划文档](./需求规划文档.md)** - 完整的功能需求和技术规划
2. **[技术选型说明](./技术选型说明.md)** - 技术选择的详细理由
3. **[数据流程设计](./数据流程设计.md)** - 数据流转和处理流程
4. **[API集成规划](./API集成规划.md)** - HyperLiquid API 集成方案
5. **[功能补充说明](./功能补充说明.md)** - 最新补充的功能说明（存款取款/看板/通知）
6. **[确认清单](./确认清单.md)** - 需要确认的事项清单

---

## 🚀 快速开始

### 前置要求

- Python 3.10+
- Node.js 18+
- Docker & Docker Compose（推荐）

### Docker 部署（推荐）

```bash
# 克隆项目
git clone <repository-url>
cd gendan

# 启动服务
docker-compose up -d

# 访问前端
open http://localhost
```

### 手动部署

```bash
# 后端
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --host 0.0.0.0 --port 8000

# 前端
cd frontend
npm install
npm run dev
```

---

## ⚙️ 配置说明

所有配置都在 `backend/data/config/` 目录下：

- `system.json` - 系统配置（API、更新频率等）
- `scoring.json` - 评分权重配置
- `recommendation.json` - 推荐算法配置
- `filters.json` - 筛选条件配置

**配置修改后无需重启，系统会自动加载最新配置。**

---

## 📊 核心指标说明

### Smart Money Score（聪明钱评分）

综合评分 0-100，权重分配：

- ROI: 35%
- 盈亏比: 20%
- 最大回撤: 20%
- 胜率+稳定性: 15%
- 资金规模: 5%
- 交易风格: 5%

### 推荐算法

默认推荐条件（可在配置中修改）：

- 钱包年龄：1-6 个月
- ROI > 200%
- 盈亏比 > 2.0
- 最大回撤 < 40%
- 本金 < $2000
- 胜率 > 55%
- Smart Money Score > 70

---

## 🔄 数据更新策略

- **活跃钱包**（最近7天有交易）：每 1 小时更新
- **普通钱包**（最近30天有交易）：每 6 小时更新
- **休眠钱包**（30天以上无交易）：每 24 小时更新
- **手动刷新**：立即更新（忽略缓存）

---

## 📝 日志系统

日志文件位于 `backend/logs/`：

- `app.log` - 应用日志（操作记录）
- `api.log` - API 调用日志
- `error.log` - 错误日志
- `performance.log` - 性能日志

日志自动轮转，保留最近 30 天。

---

## 🎨 界面预览

### 可视化看板（Dashboard）（新增）⭐
- 总体统计卡片（钱包数、总资产、总盈亏等）
- 多空比可视化（整体/按币种/盈亏对比）
- 资金流向统计（存款/取款趋势）
- 爆仓信息分析（爆仓次数/时间线）
- 钱包异动监控（大额交易/存取款）
- 排行榜展示（收益/ROI/活跃度）
- 趋势图表（收益/多空比/资金流向）

### 首页（Wallet Explorer）
- 钱包列表展示
- 多维度筛选（包含钱包年龄、初始资金）
- 排序和搜索
- 分页浏览

### 钱包详情页（Wallet Profile）
- 核心指标展示（包含初始资金）
- 收益曲线图
- 交易历史表格
- 当前持仓信息
- 存款取款记录（新增）
- 资金流水统计（新增）
- 钱包画像标签

### 通知中心（新增）
- 通知历史列表
- 通知筛选和搜索
- 通知设置配置

---

## 🔧 开发计划

### 第一阶段（MVP）
- [x] 需求规划和技术选型
- [ ] 后端基础框架
- [ ] HyperLiquid API 集成
- [ ] 钱包导入功能
- [ ] 基础数据分析
- [ ] 前端列表页
- [ ] 前端详情页

### 第二阶段（完善）
- [ ] 批量导入优化
- [ ] 定时更新任务
- [ ] 推荐算法
- [ ] 完整评分系统
- [ ] 图表可视化
- [ ] 日志系统

### 第三阶段（优化）
- [ ] 性能优化
- [ ] UI/UX 优化
- [ ] 错误处理完善
- [ ] 文档完善
- [ ] 部署脚本

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

## 📄 许可证

MIT License

---

## 💡 设计理念

1. **简单优先**：选择简单易学的技术栈
2. **够用就好**：不追求最新最酷的技术
3. **易于维护**：代码清晰，文档完善
4. **部署友好**：一键部署，小白也能用
5. **配置化**：所有参数可配置，无需改代码

---

## ❓ 常见问题

### Q: 为什么选择 JSON 文件存储？
A: 简单直观，易于备份，适合中等规模数据（几千到几万条）。如果未来数据量增长，可以轻松迁移到 SQLite。

### Q: 性能如何？
A: 对于本项目规模（几千个钱包），性能完全够用。已做优化：索引文件、分页加载、缓存机制、增量更新。

### Q: 如何扩展？
A: 如果数据量增长到 10万+，可以：
1. 迁移到 SQLite（单文件，改动小）
2. 使用 Redis 缓存热点数据
3. JSON 文件分片存储

### Q: 支持多用户吗？
A: 当前版本是单用户版本。未来可以扩展用户系统。

---

## 📞 联系方式

如有问题或建议，欢迎提交 Issue。

---

**注意**：本项目目前处于规划阶段，代码实现待确认需求后开始。


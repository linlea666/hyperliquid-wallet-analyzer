# å®å¡”é¢æ¿éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æœåŠ¡å™¨è¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux (CentOS 7+/Ubuntu 18+/Debian 10+)
- **Python**: 3.10+
- **Node.js**: 18+
- **å†…å­˜**: å»ºè®® 2GB+
- **ç£ç›˜**: å»ºè®® 10GB+

### 2. å®å¡”é¢æ¿å®‰è£…

å¦‚æœè¿˜æ²¡æœ‰å®‰è£…å®å¡”é¢æ¿ï¼Œè¯·å…ˆå®‰è£…ï¼š

```bash
# CentOS
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh

# Ubuntu/Debian
wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: ä¸Šä¼ é¡¹ç›®æ–‡ä»¶

1. **é€šè¿‡å®å¡”é¢æ¿æ–‡ä»¶ç®¡ç†**ï¼š
   - ç™»å½•å®å¡”é¢æ¿
   - è¿›å…¥ã€Œæ–‡ä»¶ã€ç®¡ç†
   - ä¸Šä¼ é¡¹ç›®å‹ç¼©åŒ…åˆ° `/www/wwwroot/` ç›®å½•
   - è§£å‹æ–‡ä»¶

2. **æˆ–é€šè¿‡ SSH**ï¼š
```bash
cd /www/wwwroot
# ä¸Šä¼ æ–‡ä»¶åè§£å‹
unzip gendan.zip
cd gendan
```

### æ­¥éª¤ 2: å®‰è£… Python ç¯å¢ƒ

1. **åœ¨å®å¡”é¢æ¿å®‰è£… Python**ï¼š
   - è¿›å…¥ã€Œè½¯ä»¶å•†åº—ã€
   - æœç´¢ã€ŒPythoné¡¹ç›®ç®¡ç†å™¨ã€
   - å®‰è£…å¹¶å¯ç”¨

2. **æˆ–æ‰‹åŠ¨å®‰è£…**ï¼š
```bash
# å®‰è£… Python 3.10
yum install python3 python3-pip -y  # CentOS
# æˆ–
apt install python3 python3-pip python3-venv -y  # Ubuntu/Debian
```

### æ­¥éª¤ 3: å®‰è£… Node.js

1. **åœ¨å®å¡”é¢æ¿å®‰è£… Node.js**ï¼š
   - è¿›å…¥ã€Œè½¯ä»¶å•†åº—ã€
   - æœç´¢ã€ŒNode.jsç‰ˆæœ¬ç®¡ç†å™¨ã€
   - å®‰è£… Node.js 18+

2. **æˆ–æ‰‹åŠ¨å®‰è£…**ï¼š
```bash
# ä½¿ç”¨ nvm å®‰è£…
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install 18
nvm use 18
```

### æ­¥éª¤ 4: é…ç½®åç«¯

```bash
cd /www/wwwroot/gendan/backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿï¼‰
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt

# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
# pip install -i https://mirrors.aliyun.com/pypi/simple/ -r requirements.txt
```

### æ­¥éª¤ 5: é…ç½®å‰ç«¯

```bash
cd /www/wwwroot/gendan/frontend

# å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿï¼‰
npm config set registry https://registry.npmmirror.com
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

æ„å»ºå®Œæˆåï¼Œå‰ç«¯æ–‡ä»¶ä¼šåœ¨ `frontend/dist/` ç›®å½•ã€‚

### æ­¥éª¤ 6: é…ç½® Nginx

1. **åœ¨å®å¡”é¢æ¿åˆ›å»ºç½‘ç«™**ï¼š
   - è¿›å…¥ã€Œç½‘ç«™ã€â†’ã€Œæ·»åŠ ç«™ç‚¹ã€
   - åŸŸåï¼šå¡«å†™æ‚¨çš„åŸŸåï¼ˆæˆ–ä½¿ç”¨ IPï¼‰
   - æ ¹ç›®å½•ï¼š`/www/wwwroot/gendan/frontend/dist`
   - PHPç‰ˆæœ¬ï¼šçº¯é™æ€

2. **é…ç½® Nginx åå‘ä»£ç†**ï¼š

ç‚¹å‡»ç½‘ç«™ã€Œè®¾ç½®ã€â†’ã€Œé…ç½®æ–‡ä»¶ã€ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;  # æ›¿æ¢ä¸ºæ‚¨çš„åŸŸå
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    root /www/wwwroot/gendan/frontend/dist;
    index index.html;
    
    # å‰ç«¯è·¯ç”±
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # åç«¯ API ä»£ç†
    location /api {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # WebSocket æ”¯æŒï¼ˆå¦‚æœéœ€è¦ï¼‰
    location /ws {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

### æ­¥éª¤ 7: é…ç½®åç«¯æœåŠ¡ï¼ˆä½¿ç”¨ PM2ï¼‰

1. **å®‰è£… PM2**ï¼š
```bash
npm install -g pm2
```

2. **åˆ›å»ºå¯åŠ¨è„šæœ¬**ï¼š

åˆ›å»º `/www/wwwroot/gendan/start-backend.sh`ï¼š

```bash
#!/bin/bash
cd /www/wwwroot/gendan/backend
source venv/bin/activate
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

3. **ä½¿ç”¨ PM2 å¯åŠ¨åç«¯**ï¼š
```bash
cd /www/wwwroot/gendan
pm2 start start-backend.sh --name hyperliquid-backend --interpreter bash
pm2 save
pm2 startup  # è®¾ç½®å¼€æœºè‡ªå¯
```

### æ­¥éª¤ 8: é…ç½®é˜²ç«å¢™

åœ¨å®å¡”é¢æ¿ï¼š
- è¿›å…¥ã€Œå®‰å…¨ã€
- å¼€æ”¾ç«¯å£ï¼š`8000`ï¼ˆåç«¯ï¼‰ã€`80`ï¼ˆHTTPï¼‰ã€`443`ï¼ˆHTTPSï¼‰

---

## ğŸ”§ ä½¿ç”¨å®å¡”é¢æ¿ Python é¡¹ç›®ç®¡ç†å™¨ï¼ˆæ¨èï¼‰

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®å¡” Python é¡¹ç›®ç®¡ç†å™¨

1. **åˆ›å»º Python é¡¹ç›®**ï¼š
   - è¿›å…¥ã€Œè½¯ä»¶å•†åº—ã€â†’ã€ŒPythoné¡¹ç›®ç®¡ç†å™¨ã€
   - ç‚¹å‡»ã€Œæ·»åŠ é¡¹ç›®ã€
   - é¡¹ç›®åç§°ï¼š`hyperliquid-backend`
   - é¡¹ç›®è·¯å¾„ï¼š`/www/wwwroot/gendan/backend`
   - Python ç‰ˆæœ¬ï¼šé€‰æ‹© Python 3.10+
   - å¯åŠ¨æ–‡ä»¶ï¼š`app/main.py`
   - ç«¯å£ï¼š`8000`

2. **å®‰è£…ä¾èµ–**ï¼š
   - åœ¨é¡¹ç›®ç®¡ç†å™¨ä¸­ç‚¹å‡»ã€Œæ¨¡å—ã€
   - ç‚¹å‡»ã€Œæ‰¹é‡å®‰è£…ã€
   - ç²˜è´´ `requirements.txt` å†…å®¹æˆ–é€ä¸ªå®‰è£…

3. **å¯åŠ¨é¡¹ç›®**ï¼š
   - ç‚¹å‡»ã€Œå¯åŠ¨ã€æŒ‰é’®
   - è®¾ç½®ã€Œå¼€æœºè‡ªå¯ã€

---

## ğŸ“ ä¸€é”®éƒ¨ç½²è„šæœ¬

åˆ›å»º `/www/wwwroot/gendan/deploy.sh`ï¼š

```bash
#!/bin/bash

echo "ğŸš€ å¼€å§‹éƒ¨ç½² HyperLiquid é’±åŒ…åˆ†æç³»ç»Ÿ..."

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/gendan

# 1. é…ç½®åç«¯
echo "ğŸ“¦ é…ç½®åç«¯..."
cd backend
python3 -m venv venv
source venv/bin/activate
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt

# 2. é…ç½®å‰ç«¯
echo "ğŸ“¦ é…ç½®å‰ç«¯..."
cd ../frontend
npm config set registry https://registry.npmmirror.com
npm install
npm run build

# 3. åˆ›å»ºå¯åŠ¨è„šæœ¬
echo "ğŸ“¦ åˆ›å»ºå¯åŠ¨è„šæœ¬..."
cd ..
cat > start-backend.sh << 'EOF'
#!/bin/bash
cd /www/wwwroot/gendan/backend
source venv/bin/activate
uvicorn app.main:app --host 0.0.0.0 --port 8000
EOF

chmod +x start-backend.sh

# 4. ä½¿ç”¨ PM2 å¯åŠ¨
echo "ğŸš€ å¯åŠ¨æœåŠ¡..."
pm2 delete hyperliquid-backend 2>/dev/null
pm2 start start-backend.sh --name hyperliquid-backend --interpreter bash
pm2 save

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "ğŸ“Š åç«¯ API: http://your-domain.com/api"
echo "ğŸŒ å‰ç«¯ç•Œé¢: http://your-domain.com"
```

è¿è¡Œï¼š
```bash
chmod +x deploy.sh
./deploy.sh
```

---

## ğŸ”’ SSL è¯ä¹¦é…ç½®ï¼ˆHTTPSï¼‰

1. **åœ¨å®å¡”é¢æ¿ç”³è¯· SSL**ï¼š
   - è¿›å…¥ç½‘ç«™ã€Œè®¾ç½®ã€â†’ã€ŒSSLã€
   - é€‰æ‹©ã€ŒLet's Encryptã€å…è´¹è¯ä¹¦
   - ç‚¹å‡»ã€Œç”³è¯·ã€

2. **é…ç½®å¼ºåˆ¶ HTTPS**ï¼š
   - å¼€å¯ã€Œå¼ºåˆ¶ HTTPSã€

---

## ğŸ“Š ç›‘æ§å’Œç®¡ç†

### æŸ¥çœ‹æ—¥å¿—

```bash
# åç«¯æ—¥å¿—
pm2 logs hyperliquid-backend

# åº”ç”¨æ—¥å¿—
tail -f /www/wwwroot/gendan/backend/logs/app.log

# Nginx æ—¥å¿—
tail -f /www/wwwlogs/your-domain.com.log
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯åç«¯
pm2 restart hyperliquid-backend

# é‡å¯ Nginx
systemctl restart nginx
```

### æ›´æ–°ä»£ç 

```bash
cd /www/wwwroot/gendan

# æ‹‰å–æœ€æ–°ä»£ç ï¼ˆå¦‚æœä½¿ç”¨ Gitï¼‰
git pull

# é‡æ–°å®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœ‰æ›´æ–°ï¼‰
cd backend
source venv/bin/activate
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt

cd ../frontend
npm install
npm run build

# é‡å¯æœåŠ¡
pm2 restart hyperliquid-backend
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

### åç«¯é…ç½®

ç¼–è¾‘ `/www/wwwroot/gendan/backend/data/config/system.json`ï¼š

```json
{
  "api": {
    "base_url": "https://api.hyperliquid.xyz/info",
    "timeout": 30,
    "retry_times": 3,
    "retry_delay": 1,
    "use_mock": false  // ç”Ÿäº§ç¯å¢ƒè®¾ä¸º false
  }
}
```

### æ•°æ®ç›®å½•æƒé™

```bash
chmod -R 755 /www/wwwroot/gendan/backend/data
chmod -R 755 /www/wwwroot/gendan/backend/logs
```

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 8000

# ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘ start-backend.shï¼‰
# å°† --port 8000 æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### 2. æƒé™é—®é¢˜

```bash
# è®¾ç½®ç›®å½•æƒé™
chown -R www:www /www/wwwroot/gendan
chmod -R 755 /www/wwwroot/gendan
```

### 3. ä¾èµ–å®‰è£…å¤±è´¥

```bash
# ä½¿ç”¨å›½å†…é•œåƒ
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
npm config set registry https://registry.npmmirror.com
```

### 4. PM2 æœªæ‰¾åˆ°

```bash
# å…¨å±€å®‰è£… PM2
npm install -g pm2

# æ·»åŠ åˆ° PATH
export PATH=$PATH:/usr/local/bin
```

---

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] Python 3.10+ å·²å®‰è£…
- [ ] Node.js 18+ å·²å®‰è£…
- [ ] åç«¯ä¾èµ–å·²å®‰è£…
- [ ] å‰ç«¯å·²æ„å»ºï¼ˆdist ç›®å½•å­˜åœ¨ï¼‰
- [ ] Nginx é…ç½®æ­£ç¡®
- [ ] åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆPM2ï¼‰
- [ ] é˜²ç«å¢™ç«¯å£å·²å¼€æ”¾
- [ ] SSL è¯ä¹¦å·²é…ç½®ï¼ˆå¯é€‰ï¼‰
- [ ] æ•°æ®ç›®å½•æƒé™æ­£ç¡®

---

## ğŸ‰ éƒ¨ç½²å®Œæˆ

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ï¼š
- **å‰ç«¯ç•Œé¢**: `http://your-domain.com`
- **åç«¯ API**: `http://your-domain.com/api`
- **API æ–‡æ¡£**: `http://your-domain.com/api/docs`

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€

